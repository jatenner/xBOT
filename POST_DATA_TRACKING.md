# ğŸ“Š POST DATA TRACKING

**Complete breakdown of what data is stored for regular posts**

---

## ğŸ¯ **STAGE 1: GENERATION (content_metadata table)**

When a post is generated by the AI:

### **Stored Data:**

#### **Core Identification:**
```
âœ… id - Auto-generated integer ID
âœ… decision_id - Unique UUID for this post
âœ… decision_type - 'single' or 'thread'
âœ… created_at - When generated
âœ… updated_at - Last modification
```

#### **Content:**
```
âœ… content - The actual tweet text
âœ… thread_parts - For threads: ["tweet1", "tweet2", ...]
âœ… thread_length - Number of tweets in thread (1-25)
```

#### **Generation Metadata:**
```
âœ… generation_source - 'real' (live) or 'synthetic' (shadow)
âœ… generator_name - Which generator created it (coach, provocateur, dataNerd, etc.)
âœ… topic_cluster - Health topic category
âœ… angle - The AI-generated angle
âœ… tone - The AI-generated tone (educational, provocative, etc.)
âœ… format_strategy - AI-generated format strategy
âœ… raw_topic - Original topic for diversity tracking
```

#### **Style & Strategy:**
```
âœ… style - Content style (educational, storytelling, etc.)
âœ… bandit_arm - Strategy identifier for A/B testing
âœ… timing_arm - Time slot identifier
âœ… fact_source - Where facts came from
âœ… hook_type - Type of hook used
âœ… hook_pattern - Specific hook pattern
âœ… cta_type - Call-to-action type
```

#### **Quality & Predictions:**
```
âœ… quality_score - Our quality assessment (0-1)
âœ… predicted_er - Expected engagement rate
âœ… predicted_engagement - 'low', 'medium', 'high'
âœ… novelty - How unique/novel (0-1)
âœ… readability_score - How readable
âœ… sentiment - Emotional tone (-1 to 1)
```

#### **Status Tracking:**
```
âœ… status - 'queued', 'posted', 'skipped', 'failed'
âœ… scheduled_at - When to post
âœ… posted_at - When actually posted (null until posted)
âœ… skip_reason - Why skipped (if applicable)
âœ… error_message - Error details (if failed)
```

#### **Advanced Features:**
```
âœ… embedding - Vector embedding for similarity (1536 dimensions)
âœ… content_hash - Hash for duplicate detection
âœ… features - JSONB with AI-extracted features
âœ… experiment_id - A/B test identifier
âœ… experiment_arm - 'control', 'variant_a', 'variant_b'
```

#### **Performance (filled after posting):**
```
âœ… tweet_id - Actual Twitter tweet ID
âœ… actual_likes - Real likes count
âœ… actual_retweets - Real retweets count
âœ… actual_replies - Real replies count
âœ… actual_impressions - Real views count
âœ… actual_engagement_rate - Calculated ER
âœ… viral_score - Virality rating (0-100)
```

#### **Learning Metrics:**
```
âœ… prediction_accuracy - How accurate our prediction was
âœ… style_effectiveness - How well this style performed (0-100)
âœ… hook_effectiveness - How well the hook worked (0-1)
âœ… cta_effectiveness - How well the CTA worked (0-1)
âœ… fact_resonance - How well facts resonated (0-1)
```

**Example:**
```json
{
  "decision_id": "abc-123-def",
  "content": "Blue light (480nm) hits ipRGC cells â†’ SCN master clock â†’ cortisol release...",
  "generator_name": "data_nerd",
  "topic_cluster": "circadian_rhythms",
  "angle": "mechanism_explanation",
  "tone": "educational",
  "quality_score": 0.87,
  "predicted_er": 0.03,
  "status": "queued",
  "scheduled_at": "2024-10-28T20:00:00Z"
}
```

---

## ğŸš€ **STAGE 2: POSTING (posted_decisions table)**

When the post is actually posted to Twitter:

### **Stored Data:**
```
âœ… id - Auto-generated ID
âœ… decision_id - Links back to content_metadata
âœ… decision_type - 'single' or 'thread'
âœ… content - The posted text
âœ… tweet_id - Twitter's tweet ID
âœ… target_tweet_id - If reply, what we replied to
âœ… target_username - If reply, who we replied to
âœ… bandit_arm - Strategy used
âœ… timing_arm - Time slot used
âœ… predicted_er - Expected engagement rate
âœ… quality_score - Quality assessment
âœ… topic_cluster - Topic category
âœ… generation_source - 'real' or 'synthetic'
âœ… posted_at - Exact timestamp posted
âœ… created_at - Record creation
```

**Example:**
```json
{
  "decision_id": "abc-123-def",
  "tweet_id": "1234567890",
  "content": "Blue light (480nm) hits ipRGC cells...",
  "bandit_arm": "educational",
  "topic_cluster": "circadian_rhythms",
  "posted_at": "2024-10-28T20:00:15Z"
}
```

---

## ğŸ“ˆ **STAGE 3: METRICS COLLECTION (outcomes table)**

Performance metrics scraped from Twitter:

### **Stored Data:**
```
âœ… id - Auto-generated ID
âœ… decision_id - Links to our post
âœ… tweet_id - Twitter tweet ID
âœ… simulated - false=real metrics, true=synthetic (shadow mode)

ENGAGEMENT METRICS:
âœ… impressions - How many people saw it
âœ… likes - Like count
âœ… retweets - Retweet count
âœ… replies - Reply count
âœ… bookmarks - Bookmark count
âœ… quotes - Quote tweet count
âœ… engagement_rate - Calculated ER (likes+RTs+replies+bookmarks)/impressions

TIMESTAMPS:
âœ… collected_at - When metrics were scraped
âœ… created_at - Record creation
```

**Example:**
```json
{
  "decision_id": "abc-123-def",
  "tweet_id": "1234567890",
  "impressions": 2450,
  "likes": 85,
  "retweets": 12,
  "replies": 6,
  "bookmarks": 18,
  "engagement_rate": 0.0494,
  "simulated": false,
  "collected_at": "2024-10-28T21:00:00Z"
}
```

---

## â±ï¸ **STAGE 4: VELOCITY TRACKING (post_velocity_tracking table)**

Time-based performance tracking at specific checkpoints:

### **Tracked At:**
```
âœ… 1 hour after posting
âœ… 6 hours after posting
âœ… 24 hours after posting
âœ… 7 days after posting
```

### **Stored Data:**
```
âœ… id - Auto-generated ID
âœ… post_id - Links to our post
âœ… tweet_id - Twitter tweet ID
âœ… check_time - When this checkpoint was measured
âœ… hours_after_post - 1, 6, 24, or 168 hours
âœ… collection_phase - 'checkpoint_1h', 'checkpoint_6h', etc.

METRICS AT CHECKPOINT:
âœ… likes - Likes at this time
âœ… retweets - Retweets at this time
âœ… replies - Replies at this time
âœ… bookmarks - Bookmarks at this time
âœ… views - Views at this time
âœ… follower_count - Our follower count at this time
```

**Example:**
```json
{
  "post_id": "abc-123-def",
  "hours_after_post": 1,
  "likes": 12,
  "retweets": 2,
  "views": 450,
  "collection_phase": "checkpoint_1h",
  "check_time": "2024-10-28T21:00:00Z"
}
```

**This enables:**
- Engagement velocity analysis (how fast did it grow?)
- Peak performance timing (when did it peak?)
- Long-tail performance (does it keep growing?)

---

## ğŸ“ **STAGE 5: GENERATOR LEARNING (generator_performance table)**

Learning which generators perform best:

### **Stored Data:**
```
âœ… generator_name - Which generator (coach, provocateur, etc.)
âœ… total_posts - How many posts generated
âœ… avg_engagement_rate - Average ER across all posts
âœ… avg_likes - Average likes
âœ… avg_retweets - Average retweets
âœ… best_post_id - Best performing post
âœ… best_engagement_rate - Best ER achieved
âœ… trend - 'improving', 'declining', 'stable'
âœ… last_updated - When stats were updated
```

**Example:**
```json
{
  "generator_name": "data_nerd",
  "total_posts": 45,
  "avg_engagement_rate": 0.0425,
  "avg_likes": 92,
  "best_post_id": "xyz-789",
  "best_engagement_rate": 0.0875,
  "trend": "improving"
}
```

---

## ğŸ§ª **STAGE 6: A/B TESTING (bandit_arms table)**

Continuous learning through A/B testing:

### **Stored Data:**
```
âœ… arm_name - Strategy name (e.g., "educational", "provocative")
âœ… pulls - How many times used
âœ… rewards - Total engagement received
âœ… avg_reward - Average reward per use
âœ… confidence_bound - Upper confidence bound
âœ… last_pulled - Last time used
âœ… created_at - When created
```

**This enables:**
- Multi-armed bandit optimization
- Automatic strategy selection
- Continuous performance improvement

---

## ğŸ“Š **COMPLETE DATA FLOW**

```
1. GENERATE POST
   â””â”€ Store in content_metadata
      â”œâ”€ Content & metadata
      â”œâ”€ Generator used
      â”œâ”€ Topic/angle/tone
      â”œâ”€ Quality predictions
      â””â”€ Embedding & features

2. POST TO TWITTER
   â””â”€ Store in posted_decisions
      â”œâ”€ Posted timestamp
      â”œâ”€ Twitter tweet ID
      â””â”€ Strategy used

3. COLLECT METRICS (multiple times)
   â””â”€ Store in outcomes
      â”œâ”€ Impressions, likes, RTs
      â”œâ”€ Engagement rate
      â””â”€ Timestamp of collection

4. TRACK VELOCITY
   â””â”€ Store in post_velocity_tracking
      â”œâ”€ Metrics at 1h, 6h, 24h, 7d
      â”œâ”€ Growth velocity
      â””â”€ Performance curves

5. LEARN & IMPROVE
   â””â”€ Update generator_performance
      â”œâ”€ Generator effectiveness
      â”œâ”€ Best practices
      â””â”€ Performance trends
   
   â””â”€ Update bandit_arms
      â”œâ”€ Strategy performance
      â”œâ”€ Confidence scores
      â””â”€ Automatic optimization
```

---

## ğŸ¯ **WHAT THIS ENABLES**

### **Content Optimization:**
```
âœ… Which generators produce best content
âœ… Which topics get most engagement
âœ… Which tones/angles work best
âœ… Which posting times are optimal
âœ… Which hooks drive engagement
```

### **Performance Analysis:**
```
âœ… Engagement rate trends over time
âœ… Viral potential scoring
âœ… Content similarity detection (no duplicates)
âœ… Prediction accuracy tracking
âœ… Growth velocity analysis
```

### **Machine Learning:**
```
âœ… Continuous strategy optimization
âœ… Automatic A/B testing
âœ… Generator performance ranking
âœ… Topic effectiveness scoring
âœ… Multi-armed bandit selection
```

### **Strategic Insights:**
```
âœ… What content goes viral
âœ… When to post for maximum reach
âœ… Which formats work best (single vs thread)
âœ… How to improve predictions
âœ… What makes content effective
```

---

## ğŸ”„ **METRICS UPDATE FREQUENCY**

### **Regular Scraping:**
```
âœ… Metrics scraper runs every 10 minutes
âœ… Prioritizes recent posts (last 3 days)
âœ… Also scrapes historical posts (3-30 days old)
âœ… Scrapes ~20 posts per cycle
```

### **Velocity Tracking:**
```
âœ… 1-hour checkpoint (within 30 min window)
âœ… 6-hour checkpoint (within 30 min window)
âœ… 24-hour checkpoint (within 30 min window)
âœ… 7-day checkpoint (within 30 min window)
```

### **Learning Updates:**
```
âœ… Generator performance: Daily
âœ… Bandit arms: After each post
âœ… Topic analysis: Hourly
âœ… Outcome predictions: Continuous
```

---

## ğŸ’¾ **DATA RETENTION**

```
âœ… content_metadata: Forever (core data)
âœ… posted_decisions: Forever (posting history)
âœ… outcomes: Forever (performance learning)
âœ… post_velocity_tracking: Forever (velocity analysis)
âœ… generator_performance: Updated continuously
âœ… bandit_arms: Updated continuously
```

---

## âœ… **SUMMARY**

**YES, your post system stores EXTENSIVE data:**

### **Generation Stage:**
- Content, metadata, generator used
- Topic, angle, tone combinations
- Quality scores, predictions
- Embeddings, features

### **Posting Stage:**
- Posted timestamp, Twitter ID
- Strategy used, timing slot
- Content snapshot

### **Performance Stage:**
- All engagement metrics (likes, RTs, replies, etc.)
- Engagement rate, impressions
- Multiple collection points

### **Velocity Stage:**
- Growth rates at 1h, 6h, 24h, 7d
- Performance curves
- Peak timing analysis

### **Learning Stage:**
- Generator effectiveness
- Strategy performance
- A/B test results
- Continuous optimization

**This data powers:**
- âœ… Smart generator selection
- âœ… Topic optimization
- âœ… A/B testing & learning
- âœ… Performance prediction
- âœ… Content improvement
- âœ… Viral content identification

**Your post system is a complete machine learning pipeline!** ğŸš€
