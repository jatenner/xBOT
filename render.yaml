services:
  - type: background_worker
    name: autonomous-health-bot
    runtime: node
    buildCommand: npm install
    startCommand: node src/index.ts
    envVars:
      - key: NODE_ENV
        value: production
      - key: TZ
        value: UTC
      
      # Twitter API Configuration
      - key: TWITTER_APP_KEY
        sync: false
      - key: TWITTER_APP_SECRET
        sync: false
      - key: TWITTER_ACCESS_TOKEN
        sync: false
      - key: TWITTER_ACCESS_SECRET
        sync: false
      - key: TWITTER_BEARER_TOKEN
        sync: false
      
      # Database Configuration
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false
      
      # AI Configuration
      - key: OPENAI_API_KEY
        sync: false
      - key: NEWS_API_KEY
        sync: false
      
      # üß† SUPREME AI CONTROL - DYNAMIC POSTING DECISIONS
      - key: AI_SUPREME_MODE
        value: true
      - key: DYNAMIC_POSTING_ENABLED
        value: true
      - key: AI_OVERRIDE_LIMITS
        value: true
      - key: SUPREME_AI_DECISION_FREQUENCY
        value: 30
      - key: EMERGENCY_OVERRIDE_ENABLED
        value: true
      - key: BREAKING_NEWS_RESPONSE
        value: true
      - key: COMPETITIVE_INTELLIGENCE
        value: true
      
      # üìä AI-DETERMINED SETTINGS (No More Hardcoded Limits!)
      - key: DISABLE_BOT
        value: false
      - key: MAX_DAILY_TWEETS
        value: 17
      - key: DAILY_TARGET
        value: AI_DETERMINED
      - key: POST_FREQUENCY_MINUTES
        value: AI_DETERMINED
      - key: ENGAGEMENT_TARGET_DAILY
        value: AI_DETERMINED
      - key: ALGORITHMIC_BOOST_LEVEL
        value: AI_DETERMINED
      
      # üîê SAFETY SETTINGS (Prevent Twitter Detection)
      - key: GHOST_ACCOUNT_SYNDROME_FIX
        value: false
      - key: AGGRESSIVE_ENGAGEMENT_MODE
        value: false
      - key: AUTO_REPLY_ENABLED
        value: false
      - key: AUTO_FOLLOW_ENABLED
        value: false
      - key: RATE_LIMIT_SAFETY
        value: true
      - key: SPAM_PREVENTION
        value: true
      - key: HUMAN_LIKE_TIMING
        value: true
      - key: TRENDING_HASHTAG_TRACKING
        value: true
      - key: REAL_TIME_OPTIMIZATION
        value: true
      
      # COST OPTIMIZATION SETTINGS
      - key: EMERGENCY_COST_MODE
        value: false
      - key: DISABLE_LEARNING_AGENTS
        value: false
      - key: DAILY_BUDGET_LIMIT
        value: 2.00
      - key: OPENAI_PREFERRED_MODEL
        value: gpt-4o-mini
      - key: OPENAI_MAX_TOKENS
        value: 200
      - key: OPENAI_MAX_CALLS_PER_HOUR
        value: 20
      
      # API KEYS (From Render secrets)
      - key: X_API_KEY
        fromSecret: X_API_KEY
      - key: X_API_SECRET
        fromSecret: X_API_SECRET  
      - key: X_ACCESS_TOKEN
        fromSecret: X_ACCESS_TOKEN
      - key: X_ACCESS_TOKEN_SECRET
        fromSecret: X_ACCESS_TOKEN_SECRET
      - key: X_BEARER_TOKEN
        fromSecret: X_BEARER_TOKEN
      - key: OPENAI_API_KEY
        fromSecret: OPENAI_API_KEY
      - key: SUPABASE_URL
        fromSecret: SUPABASE_URL
      - key: SUPABASE_ANON_KEY
        fromSecret: SUPABASE_ANON_KEY
      - key: NEWS_API_KEY
        fromSecret: NEWS_API_KEY
      - key: PEXELS_API_KEY
        fromSecret: PEXELS_API_KEY
      - key: PORT
        value: 3000