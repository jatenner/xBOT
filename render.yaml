services:
  - type: web
    name: xbot-prod
    env: node
    runtime: node
    region: oregon
    plan: starter-plus
    branch: main
    buildCommand: |
      echo "ğŸ”§ Using Node.js $(node --version)"
      echo "ğŸ“¦ Installing dependencies..."
      npm ci
      echo "ğŸ—ï¸ Building TypeScript..."
      npm run build
      echo "âœ… Build complete - checking dist folder..."
      ls -la dist/ || echo "âŒ dist folder missing!"
    startCommand: |
      echo "ğŸš€ Starting application..."
      echo "ğŸ“‚ Checking dist folder..."
      ls -la dist/ || echo "âŒ dist folder missing!"
      npm start
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
      - key: RUNTIME
        value: node
