services:
  - type: background_worker
    name: autonomous-health-bot
    runtime: node
    buildCommand: npm install
    startCommand: node src/index.ts
    envVars:
      - key: NODE_ENV
        value: production
      - key: TZ
        value: UTC
      
      # Twitter API Configuration
      - key: TWITTER_APP_KEY
        sync: false
      - key: TWITTER_APP_SECRET
        sync: false
      - key: TWITTER_ACCESS_TOKEN
        sync: false
      - key: TWITTER_ACCESS_SECRET
        sync: false
      - key: TWITTER_BEARER_TOKEN
        sync: false
      
      # Database Configuration
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false
      
      # AI Configuration
      - key: OPENAI_API_KEY
        sync: false
      - key: NEWS_API_KEY
        sync: false
      
      # SAFE HUMAN-LIKE BEHAVIOR SETTINGS (Prevent Account Locks & Rate Limits)
      - key: DISABLE_BOT
        value: false
      - key: MAX_DAILY_TWEETS
        value: 8
      - key: GHOST_ACCOUNT_SYNDROME_FIX
        value: false
      - key: AGGRESSIVE_ENGAGEMENT_MODE
        value: false
      - key: COMMUNITY_ENGAGEMENT_FREQUENCY
        value: every_4_hours
      - key: VIRAL_OPTIMIZATION_MODE
        value: moderate
      - key: ALGORITHMIC_BOOST_LEVEL
        value: subtle
      - key: POST_FREQUENCY_MINUTES
        value: 180
      - key: ENGAGEMENT_TARGET_DAILY
        value: 20
      - key: AUTO_REPLY_ENABLED
        value: false
      - key: AUTO_FOLLOW_ENABLED
        value: false
      - key: TRENDING_HASHTAG_TRACKING
        value: true
      - key: REAL_TIME_OPTIMIZATION
        value: true
      
      # COST OPTIMIZATION SETTINGS
      - key: EMERGENCY_COST_MODE
        value: false
      - key: DISABLE_LEARNING_AGENTS
        value: false
      - key: DAILY_BUDGET_LIMIT
        value: 2.00
      - key: OPENAI_PREFERRED_MODEL
        value: gpt-4o-mini
      - key: OPENAI_MAX_TOKENS
        value: 200
      - key: OPENAI_MAX_CALLS_PER_HOUR
        value: 20
      
      # API KEYS (From Render secrets)
      - key: X_API_KEY
        fromSecret: X_API_KEY
      - key: X_API_SECRET
        fromSecret: X_API_SECRET  
      - key: X_ACCESS_TOKEN
        fromSecret: X_ACCESS_TOKEN
      - key: X_ACCESS_TOKEN_SECRET
        fromSecret: X_ACCESS_TOKEN_SECRET
      - key: X_BEARER_TOKEN
        fromSecret: X_BEARER_TOKEN
      - key: OPENAI_API_KEY
        fromSecret: OPENAI_API_KEY
      - key: SUPABASE_URL
        fromSecret: SUPABASE_URL
      - key: SUPABASE_ANON_KEY
        fromSecret: SUPABASE_ANON_KEY
      - key: NEWS_API_KEY
        fromSecret: NEWS_API_KEY
      - key: PEXELS_API_KEY
        fromSecret: PEXELS_API_KEY
      - key: PORT
        value: 3000