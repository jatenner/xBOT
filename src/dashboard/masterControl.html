<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Snap2Health X-Bot Master Control</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            overflow-x: hidden;
        }

        .header {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #00d4ff, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 10px;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .status-online { color: #4ade80; }
        .status-warning { color: #fbbf24; }
        .status-error { color: #ef4444; }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 20px;
            padding: 20px;
            max-width: 1800px;
            margin: 0 auto;
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .panel h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #00d4ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-chat {
            grid-column: 1 / -1;
            min-height: 400px;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 400px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 12px;
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }

        .message.user {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin-left: auto;
        }

        .message.ai {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            margin-right: auto;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .chat-input input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .chat-input button {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .chat-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .metric-card {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
            background: linear-gradient(45deg, #00d4ff, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .log-entry {
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 0.9rem;
            border-left: 3px solid;
            animation: slideIn 0.3s ease;
        }

        .log-info { 
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }

        .log-success { 
            background: rgba(34, 197, 94, 0.1);
            border-color: #22c55e;
        }

        .log-warning { 
            background: rgba(245, 158, 11, 0.1);
            border-color: #f59e0b;
        }

        .log-error { 
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
        }

        .control-button {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .thinking-indicator {
            display: none;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .thinking-dots {
            display: flex;
            gap: 4px;
        }

        .thinking-dots div {
            width: 8px;
            height: 8px;
            background: #00d4ff;
            border-radius: 50%;
            animation: thinking 1.4s infinite ease-in-out;
        }

        .thinking-dots div:nth-child(1) { animation-delay: -0.32s; }
        .thinking-dots div:nth-child(2) { animation-delay: -0.16s; }

        .agent-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .agent-status:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .agent-name {
            font-weight: 600;
        }

        .agent-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .agent-active { background: #4ade80; }
        .agent-idle { background: #fbbf24; }
        .agent-error { background: #ef4444; }

        .quota-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .quota-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #2196F3);
            border-radius: 8px;
            transition: width 0.3s ease;
        }

        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 1001;
        }

        .connected {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid #22c55e;
            color: #22c55e;
        }

        .disconnected {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid #ef4444;
            color: #ef4444;
        }

        @keyframes thinking {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .status-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .status-item {
                justify-content: center;
            }
        }

        /* Bot Mind Styles */
        .mind-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mind-section h4 {
            margin: 0 0 10px 0;
            color: #E1BEE7;
            font-size: 1rem;
        }

        .mind-content {
            max-height: 200px;
            overflow-y: auto;
        }

        .thought-item, .pipeline-item, .research-item, .pattern-item, .insight-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
            border-left: 3px solid #8A2BE2;
            font-size: 0.9rem;
        }

        .pipeline-meta, .research-meta, .pattern-confidence, .insight-impact {
            font-size: 0.8rem;
            color: #B0B0B0;
            margin-top: 5px;
        }

        .diagnostic-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 5px 0;
        }

        .diagnostic-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Scrollbar styling for mind content */
        .mind-content::-webkit-scrollbar {
            width: 4px;
        }

        .mind-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        .mind-content::-webkit-scrollbar-thumb {
            background: rgba(138, 43, 226, 0.5);
            border-radius: 2px;
        }

        .mind-content::-webkit-scrollbar-thumb:hover {
            background: rgba(138, 43, 226, 0.7);
        }

        /* Performance Analysis Styles */
        .performance-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .performance-section h4 {
            margin: 0 0 10px 0;
            color: #81C784;
            font-size: 1rem;
        }

        .performance-content {
            max-height: 150px;
            overflow-y: auto;
        }

        .trend-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .trend-item:last-child {
            border-bottom: none;
        }

        .trend-label {
            font-size: 0.9rem;
            color: #B0B0B0;
        }

        .trend-value {
            font-weight: 600;
            color: #81C784;
        }

        .recommendation-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 6px;
            font-size: 0.9rem;
            border-left: 3px solid #4CAF50;
        }

        /* Tweet Preview Styles */
        .tweet-preview-box {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 127, 0.3);
            border-radius: 12px;
            padding: 15px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
            font-size: 15px;
            line-height: 1.5;
            color: #ffffff;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 10px;
        }

        .loading-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 80px;
            color: #888;
            font-style: italic;
        }

        .preview-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .preview-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .preview-btn:first-child {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .preview-btn:nth-child(2) {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .preview-btn.quality-check {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .preview-btn:disabled {
            background: #555;
            color: #888;
            cursor: not-allowed;
        }

        .preview-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .quality-metrics {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .metric-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .score-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444 0%, #fbbf24 50%, #4ade80 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .status-approved { color: #4ade80; }
        .status-pending { color: #fbbf24; }
        .status-rejected { color: #ef4444; }
        .status-unknown { color: #888; }
        .status-good { color: #4ade80; }
        .status-warning { color: #fbbf24; }
        .status-error { color: #ef4444; }

        .queue-metric {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .queue-metric strong {
            display: block;
            color: #00d4ff;
            font-size: 0.8rem;
            margin-bottom: 8px;
        }

        .status-active { 
            color: #4ade80; 
            font-weight: bold;
        }
        .status-paused { 
            color: #fbbf24; 
            font-weight: bold;
        }
        .status-error { 
            color: #ef4444; 
            font-weight: bold;
        }

        /* Enhanced responsive design for preview section */
        @media (max-width: 1200px) {
            .preview-section, .quality-section {
                grid-column: span 1;
            }
        }
    </style>
</head>
<body>
    <div class="connection-status" id="connection-status">
        üîå Connecting...
    </div>

    <div class="header">
        <h1>üéØ SNAP2HEALTH X-BOT MASTER CONTROL</h1>
        <div class="status-bar">
            <div class="status-item">
                <span class="status-online" id="bot-indicator">‚óè</span>
                <span id="bot-status">Bot Online</span>
            </div>
            <div class="status-item">
                <span>üìä</span>
                <span id="daily-posts">0/12 Posts Today</span>
            </div>
            <div class="status-item">
                <span>üéØ</span>
                <span id="quality-score">Quality: 0/100</span>
            </div>
            <div class="status-item">
                <span>‚ö°</span>
                <span id="last-action">Last: Never</span>
            </div>
        </div>
    </div>

    <div class="main-grid">
        <!-- AI Assistant Chat -->
        <div class="panel ai-chat">
            <h3>ü§ñ AI System Intelligence</h3>
            <div class="thinking-indicator" id="thinking">
                <div class="thinking-dots">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <span>AI is analyzing system data...</span>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chat-messages">
                    <div class="message ai">
                        <strong>üß† System AI:</strong> Welcome to Master Control! I'm your AI assistant with complete access to bot intelligence, performance data, and system insights. Ask me anything about your bot's behavior, performance, or strategy. I can analyze patterns, explain decisions, and provide recommendations.
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chat-input" placeholder="Ask me about bot performance, strategy, or any system insights..." />
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>

        <!-- Real-time Metrics -->
        <div class="panel">
            <h3>üìä Real-time Metrics</h3>
            <div class="metric-card">
                <div class="metric-value" id="engagement-rate">0%</div>
                <div class="metric-label">Engagement Rate</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="followers-gained">4</div>
                <div class="metric-label">Total Followers</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="reach-score">0</div>
                <div class="metric-label">Reach Score</div>
            </div>
        </div>

        <!-- Agent Status -->
        <div class="panel">
            <h3>ü§ñ Agent Status</h3>
            <div class="agent-status">
                <span class="agent-name">Strategist Agent</span>
                <div class="agent-indicator agent-active" id="strategist-status"></div>
            </div>
            <div class="agent-status">
                <span class="agent-name">Content Generator</span>
                <div class="agent-indicator agent-active" id="content-status"></div>
            </div>
            <div class="agent-status">
                <span class="agent-name">Engagement Tracker</span>
                <div class="agent-indicator agent-active" id="engagement-status"></div>
            </div>
            <div class="agent-status">
                <span class="agent-name">Learning System</span>
                <div class="agent-indicator agent-active" id="learning-status"></div>
            </div>
            <div class="agent-status">
                <span class="agent-name">Nightly Optimizer</span>
                <div class="agent-indicator agent-idle" id="optimizer-status"></div>
            </div>
        </div>

        <!-- System Controls -->
        <div class="panel">
            <h3>‚ö° System Controls</h3>
            <button class="control-button btn-danger" onclick="emergencyStop()">
                üõë Emergency Kill Switch
            </button>
            <button class="control-button btn-primary" onclick="forcePost()">
                üìù Force Generate Post
            </button>
            <button class="control-button btn-success" onclick="optimizeNow()">
                üåô Run Optimization Now
            </button>
            <button class="control-button btn-primary" onclick="resetQuota()">
                üìä Reset Daily Quota
            </button>
        </div>

        <!-- API Quota Status -->
        <div class="panel">
            <h3>üìà API Quota Status</h3>
            <div style="margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Writes</span>
                    <span id="writes-count">0/450</span>
                </div>
                <div class="quota-bar">
                    <div class="quota-fill" id="writes-bar" style="width: 0%"></div>
                </div>
            </div>
            <div style="margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Reads</span>
                    <span id="reads-count">0/9500</span>
                </div>
                <div class="quota-bar">
                    <div class="quota-fill" id="reads-bar" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Performance Chart -->
        <div class="panel">
            <h3>üìà Performance Trends</h3>
            <div style="height: 200px; background: rgba(0, 0, 0, 0.3); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #666;">
                <div id="performance-display">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">üìà</div>
                        <div>Performance tracking active</div>
                        <div style="font-size: 0.8rem; opacity: 0.6; margin-top: 5px;">Real-time data visualization</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Activity Log -->
        <div class="panel">
            <h3>üìã Live Activity Log</h3>
            <div id="activity-log" style="max-height: 300px; overflow-y: auto;">
                <div class="log-entry log-info">
                    <strong>System:</strong> Master Control Dashboard initialized
                </div>
            </div>
        </div>

        <!-- Decision Intelligence -->
        <div class="panel">
            <h3>üß† Decision Intelligence</h3>
            <div id="decision-analysis">
                <div style="margin-bottom: 10px;">
                    <strong>Current Strategy:</strong>
                    <div id="current-strategy">Analyzing...</div>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Next Action:</strong>
                    <div id="next-action">Calculating...</div>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Confidence:</strong>
                    <div id="confidence-level">---%</div>
                </div>
            </div>
        </div>

        <!-- Content Pipeline -->
        <div class="panel">
            <h3>üîÑ Content Pipeline</h3>
            <div id="content-pipeline">
                <div style="margin-bottom: 10px;">
                    <strong>Queue Status:</strong>
                    <div id="queue-status">0 items ready</div>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Last Generated:</strong>
                    <div id="last-content">None</div>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Success Rate:</strong>
                    <div id="success-rate">---%</div>
                </div>
            </div>
        </div>

        <!-- LIVE TWEET PREVIEW - REAL-TIME MONITORING -->
        <div class="panel" style="grid-column: span 3; background: linear-gradient(135deg, rgba(0, 255, 127, 0.1), rgba(0, 191, 255, 0.1)); border: 1px solid rgba(0, 255, 127, 0.3);">
            <h3>üß™ Live Tweet Preview & Quality Monitor</h3>
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                
                <!-- Tweet Preview -->
                <div class="preview-section">
                    <h4>üìù Next Tweet Preview</h4>
                    <div id="tweet-preview" class="tweet-preview-box">
                        <div class="loading-placeholder">
                            ‚è≥ Generating preview...
                        </div>
                    </div>
                    <div class="preview-controls" style="margin-top: 10px;">
                        <button class="preview-btn" onclick="generatePreview()">üîÑ Refresh Preview</button>
                        <button class="preview-btn" onclick="testGeneration()">üß™ Test Generation</button>
                        <button class="preview-btn quality-check" onclick="forcePost()" id="ready-to-post-btn" disabled>
                            üöÄ Ready to Post
                        </button>
                    </div>
                </div>
                
                <!-- Quality Metrics -->
                <div class="quality-section">
                    <h4>‚ö° Quality Metrics</h4>
                    <div class="quality-metrics">
                        <div class="metric-item">
                            <strong>Quality Score:</strong>
                            <div class="score-bar">
                                <div class="score-fill" id="preview-quality-bar" style="width: 0%;"></div>
                            </div>
                            <span id="preview-quality-score">0/100</span>
                        </div>
                        
                        <div class="metric-item">
                            <strong>Mission Alignment:</strong>
                            <span id="preview-mission" class="status-unknown">Checking...</span>
                        </div>
                        
                        <div class="metric-item">
                            <strong>URL Integrity:</strong>
                            <span id="preview-url" class="status-good">Preserved</span>
                        </div>
                        
                        <div class="metric-item">
                            <strong>Image Selected:</strong>
                            <span id="preview-image">None</span>
                        </div>
                        
                        <div class="metric-item">
                            <strong>Content Type:</strong>
                            <span id="preview-type">Unknown</span>
                        </div>
                        
                        <div class="metric-item">
                            <strong>Character Count:</strong>
                            <span id="preview-chars">0/280</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Posting Queue Status -->
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                <h4>üìÖ Posting Queue Status</h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;">
                    <div class="queue-metric">
                        <strong>Queue Status:</strong>
                        <div id="queue-status-display" class="status-active">ACTIVE</div>
                    </div>
                    <div class="queue-metric">
                        <strong>Next Post:</strong>
                        <div id="next-post-time">Calculating...</div>
                    </div>
                    <div class="queue-metric">
                        <strong>Today's Posts:</strong>
                        <div id="todays-posts">0/12</div>
                    </div>
                    <div class="queue-metric">
                        <strong>Current Window:</strong>
                        <div id="engagement-window">Analyzing...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOT MIND ANALYSIS - NEW COMPREHENSIVE SECTION -->
        <div class="panel" style="grid-column: span 2; background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(75, 0, 130, 0.1)); border: 1px solid rgba(138, 43, 226, 0.3);">
            <h3>üß† Bot Mind Analysis - Deep Insights</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                
                <!-- Current Thinking Patterns -->
                <div class="mind-section">
                    <h4>üí≠ Current Thoughts</h4>
                    <div id="current-thoughts" class="mind-content">
                        <div class="thought-item">üí≠ Analyzing optimal posting windows...</div>
                        <div class="thought-item">üí≠ Evaluating content quality thresholds...</div>
                        <div class="thought-item">üí≠ Monitoring engagement patterns...</div>
                    </div>
                </div>
                
                <!-- Content Pipeline Mind -->
                <div class="mind-section">
                    <h4>üìù Content in Mind</h4>
                    <div id="content-pipeline-mind" class="mind-content">
                        <div class="pipeline-item">
                            <strong>Research Update:</strong> AI Drug Discovery Breakthrough
                            <div class="pipeline-meta">Quality: 85/100 | Priority: High</div>
                        </div>
                        <div class="pipeline-item">
                            <strong>Trend Analysis:</strong> Digital Therapeutics Growth
                            <div class="pipeline-meta">Quality: 78/100 | Priority: Medium</div>
                        </div>
                    </div>
                </div>
                
                <!-- Research Interests -->
                <div class="mind-section">
                    <h4>üî¨ Research Queue</h4>
                    <div id="research-interests" class="mind-content">
                        <div class="research-item">
                            üî¨ <strong>Brain-Computer Interfaces</strong>
                            <div class="research-meta">Relevance: 92% | Status: Analyzing</div>
                        </div>
                        <div class="research-item">
                            üî¨ <strong>Quantum Computing in Medicine</strong>
                            <div class="research-meta">Relevance: 87% | Status: Queued</div>
                        </div>
                    </div>
                </div>
                
                <!-- Decision Patterns -->
                <div class="mind-section">
                    <h4>‚ö° Decision Patterns</h4>
                    <div id="decision-patterns" class="mind-content">
                        <div class="pattern-item">
                            <strong>High Engagement Window:</strong> Post quality content
                            <div class="pattern-confidence">Confidence: 94%</div>
                        </div>
                        <div class="pattern-item">
                            <strong>Low Quality Score:</strong> Regenerate content
                            <div class="pattern-confidence">Confidence: 98%</div>
                        </div>
                    </div>
                </div>
                
                <!-- Learning Insights -->
                <div class="mind-section" style="grid-column: span 2;">
                    <h4>üí° Recent Learning Insights</h4>
                    <div id="learning-insights" class="mind-content">
                        <div class="insight-item">
                            üí° <strong>Engagement Optimization:</strong> Posts with specific statistics perform 23% better
                            <div class="insight-impact">Impact: High - Applied to content generation</div>
                        </div>
                        <div class="insight-item">
                            üí° <strong>Timing Analysis:</strong> Sunday morning shows 1.3x engagement multiplier
                            <div class="insight-impact">Impact: Medium - Adjusted posting schedule</div>
                        </div>
                        <div class="insight-item">
                            üí° <strong>Content Quality:</strong> Research-backed posts have 40% higher retention
                            <div class="insight-impact">Impact: High - Prioritizing verified sources</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Diagnostic Tools -->
        <div class="panel" style="background: linear-gradient(135deg, rgba(255, 69, 0, 0.1), rgba(255, 140, 0, 0.1)); border: 1px solid rgba(255, 69, 0, 0.3);">
            <h3>ü©∫ Bot Health Diagnostics</h3>
            <div id="bot-diagnostics">
                <div style="margin-bottom: 15px;">
                    <strong>üß† Cognitive Load:</strong>
                    <div class="diagnostic-bar">
                        <div class="diagnostic-fill" id="cognitive-load" style="width: 65%; background: linear-gradient(90deg, #4CAF50, #FFC107);"></div>
                    </div>
                    <span id="cognitive-percentage">65%</span>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>üéØ Decision Confidence:</strong>
                    <div class="diagnostic-bar">
                        <div class="diagnostic-fill" id="decision-confidence" style="width: 87%; background: linear-gradient(90deg, #4CAF50, #2196F3);"></div>
                    </div>
                    <span id="confidence-percentage">87%</span>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>üìö Learning Rate:</strong>
                    <div class="diagnostic-bar">
                        <div class="diagnostic-fill" id="learning-rate" style="width: 73%; background: linear-gradient(90deg, #9C27B0, #E91E63);"></div>
                    </div>
                    <span id="learning-percentage">73%</span>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong>‚ö° Response Speed:</strong>
                    <div class="diagnostic-bar">
                        <div class="diagnostic-fill" id="response-speed" style="width: 91%; background: linear-gradient(90deg, #00BCD4, #4CAF50);"></div>
                    </div>
                    <span id="speed-percentage">91%</span>
                </div>
            </div>
        </div>

        <!-- NEW: Bot Performance Analysis -->
        <div class="panel" style="grid-column: span 2; background: linear-gradient(135deg, rgba(0, 150, 136, 0.1), rgba(76, 175, 80, 0.1)); border: 1px solid rgba(0, 150, 136, 0.3);">
            <h3>üìà Bot Performance Analysis</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                
                <!-- Quality Trends -->
                <div class="performance-section">
                    <h4>üìä Quality Trends</h4>
                    <div id="quality-trends" class="performance-content">
                        <div class="trend-item">
                            <span class="trend-label">Average Quality:</span>
                            <span class="trend-value" id="avg-quality">--</span>
                        </div>
                        <div class="trend-item">
                            <span class="trend-label">Success Rate:</span>
                            <span class="trend-value" id="success-rate">--</span>
                        </div>
                        <div class="trend-item">
                            <span class="trend-label">Mission Alignment:</span>
                            <span class="trend-value" id="mission-alignment">--</span>
                        </div>
                    </div>
                </div>
                
                <!-- Engagement Analysis -->
                <div class="performance-section">
                    <h4>üí¨ Engagement Analysis</h4>
                    <div id="engagement-analysis" class="performance-content">
                        <div class="trend-item">
                            <span class="trend-label">Avg Engagement:</span>
                            <span class="trend-value" id="avg-engagement">--</span>
                        </div>
                        <div class="trend-item">
                            <span class="trend-label">Best Performing:</span>
                            <span class="trend-value" id="best-content">--</span>
                        </div>
                        <div class="trend-item">
                            <span class="trend-label">Growth Rate:</span>
                            <span class="trend-value" id="growth-rate">--</span>
                        </div>
                    </div>
                </div>
                
                <!-- Recommendations -->
                <div class="performance-section">
                    <h4>üí° AI Recommendations</h4>
                    <div id="ai-recommendations" class="performance-content">
                        <div class="recommendation-item">üéØ Focus on research-backed content</div>
                        <div class="recommendation-item">üìä Include more specific statistics</div>
                        <div class="recommendation-item">üïê Optimize posting times</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let socket;
        let systemData = {
            botStatus: 'online',
            dailyPosts: 0,
            qualityScore: 0,
            lastAction: 'Never',
            agents: {
                strategist: 'active',
                content: 'active', 
                engagement: 'active',
                learning: 'active',
                optimizer: 'idle'
            },
            quota: {
                writes: 0,
                reads: 0
            }
        };

        // Initialize dashboard
        async function initDashboard() {
            console.log('üéØ Initializing Master Control Dashboard...');
            
            // Initialize WebSocket connection
            initWebSocket();
            
            // Start periodic updates
            setInterval(updateSystemStatus, 5000);
            
            addLogEntry('System initialized successfully', 'success');
        }

        // Initialize WebSocket connection
        function initWebSocket() {
            socket = io();
            
            socket.on('connect', () => {
                console.log('üîå Connected to dashboard server');
                updateConnectionStatus(true);
                addLogEntry('Connected to real-time data stream', 'success');
            });

            socket.on('disconnect', () => {
                console.log('üîå Disconnected from dashboard server');
                updateConnectionStatus(false);
                addLogEntry('Lost connection to data stream', 'warning');
            });

            socket.on('system_status', (data) => {
                updateDashboard(data);
            });

            socket.on('metrics_update', (data) => {
                updateMetrics(data.metrics);
                updateDashboard(data.status);
            });

            socket.on('activity_log', (data) => {
                addLogEntry(data.message, data.type);
            });

            socket.on('system_update', (data) => {
                addLogEntry(data.data.message, data.type === 'emergency_stop' ? 'error' : 'info');
                if (data.type === 'emergency_stop') {
                    document.getElementById('bot-status').textContent = 'Bot Stopped';
                    document.getElementById('bot-indicator').className = 'status-error';
                }
            });

            socket.on('ai_response', (data) => {
                addChatMessage(data.response, 'ai');
                document.getElementById('thinking').style.display = 'none';
            });

            socket.on('ai_error', (data) => {
                addChatMessage('Sorry, I encountered an error processing your request.', 'ai');
                document.getElementById('thinking').style.display = 'none';
            });

            // NEW: Bot Mind updates
            socket.on('bot_mind_update', (mindData) => {
                updateBotMind(mindData);
            });

            // NEW: Diagnostic updates
            socket.on('diagnostics_update', (diagnostics) => {
                updateDiagnostics(diagnostics);
            });
        }

        // Update connection status indicator
        function updateConnectionStatus(connected) {
            const statusEl = document.getElementById('connection-status');
            if (connected) {
                statusEl.textContent = 'üîå Connected';
                statusEl.className = 'connection-status connected';
            } else {
                statusEl.textContent = 'üîå Disconnected';
                statusEl.className = 'connection-status disconnected';
            }
        }

        // Update dashboard with new data
        function updateDashboard(data) {
            if (!data) return;
            
            // Update status bar
            document.getElementById('daily-posts').textContent = `${data.dailyPosts || 0}/12 Posts Today`;
            document.getElementById('quality-score').textContent = `Quality: ${data.qualityScore || 0}/100`;
            
            if (data.lastAction && data.lastAction !== 'Never') {
                const lastActionTime = new Date(data.lastAction).toLocaleTimeString();
                document.getElementById('last-action').textContent = `Last: ${lastActionTime}`;
            }
            
            // Update bot status
            if (data.botStatus === 'disabled') {
                document.getElementById('bot-status').textContent = 'Bot Disabled';
                document.getElementById('bot-indicator').className = 'status-error';
            } else {
                document.getElementById('bot-status').textContent = 'Bot Online';
                document.getElementById('bot-indicator').className = 'status-online';
            }
            
            // Update quota bars
            if (data.quota) {
                const writesPercent = (data.quota.writes / 450) * 100;
                const readsPercent = (data.quota.reads / 9500) * 100;
                
                document.getElementById('writes-count').textContent = `${data.quota.writes}/450`;
                document.getElementById('reads-count').textContent = `${data.quota.reads}/9500`;
                document.getElementById('writes-bar').style.width = `${writesPercent}%`;
                document.getElementById('reads-bar').style.width = `${readsPercent}%`;
            }
            
            // Update agent status
            if (data.agents) {
                updateAgentStatus('strategist-status', data.agents.strategist);
                updateAgentStatus('content-status', data.agents.content);
                updateAgentStatus('engagement-status', data.agents.engagement);
                updateAgentStatus('learning-status', data.agents.learning);
                updateAgentStatus('optimizer-status', data.agents.optimizer);
            }
        }

        // Update metrics
        function updateMetrics(metrics) {
            if (!metrics) return;
            
            document.getElementById('engagement-rate').textContent = `${metrics.engagementRate}%`;
            document.getElementById('followers-gained').textContent = `${metrics.followersGained}`;
            document.getElementById('reach-score').textContent = metrics.reachScore;
        }

        // Update agent status indicator
        function updateAgentStatus(elementId, status) {
            const element = document.getElementById(elementId);
            if (element) {
                element.className = `agent-indicator agent-${status}`;
            }
        }

        // Bot Mind Analysis - NEW SECTION
        function updateBotMind(mindData) {
            if (!mindData) return;
            
            // Update thinking patterns
            if (mindData.currentThoughts) {
                document.getElementById('current-thoughts').innerHTML = mindData.currentThoughts.map(thought => 
                    `<div class="thought-item">üí≠ ${thought}</div>`
                ).join('');
            }
            
            // Update content pipeline
            if (mindData.contentQueue) {
                document.getElementById('content-pipeline-mind').innerHTML = mindData.contentQueue.map(item => 
                    `<div class="pipeline-item">
                        <strong>${item.type}:</strong> ${item.title}
                        <div class="pipeline-meta">Quality: ${item.quality}/100 | Priority: ${item.priority}</div>
                    </div>`
                ).join('');
            }
            
            // Update research interests
            if (mindData.researchQueue) {
                document.getElementById('research-interests').innerHTML = mindData.researchQueue.map(research => 
                    `<div class="research-item">
                        üî¨ <strong>${research.topic}</strong>
                        <div class="research-meta">Relevance: ${research.relevance}% | Status: ${research.status}</div>
                    </div>`
                ).join('');
            }
            
            // Update decision patterns
            if (mindData.decisionPatterns) {
                document.getElementById('decision-patterns').innerHTML = mindData.decisionPatterns.map(pattern => 
                    `<div class="pattern-item">
                        <strong>${pattern.trigger}:</strong> ${pattern.response}
                        <div class="pattern-confidence">Confidence: ${pattern.confidence}%</div>
                    </div>`
                ).join('');
            }
            
            // Update learning insights
            if (mindData.learningInsights) {
                document.getElementById('learning-insights').innerHTML = mindData.learningInsights.map(insight => 
                    `<div class="insight-item">
                        üí° <strong>${insight.category}:</strong> ${insight.discovery}
                        <div class="insight-impact">Impact: ${insight.impact}</div>
                    </div>`
                ).join('');
            }
        }

        // Update diagnostic bars
        function updateDiagnostics(diagnostics) {
            if (!diagnostics) return;
            
            if (diagnostics.cognitiveLoad !== undefined) {
                document.getElementById('cognitive-load').style.width = `${diagnostics.cognitiveLoad}%`;
                document.getElementById('cognitive-percentage').textContent = `${diagnostics.cognitiveLoad}%`;
            }
            
            if (diagnostics.decisionConfidence !== undefined) {
                document.getElementById('decision-confidence').style.width = `${diagnostics.decisionConfidence}%`;
                document.getElementById('confidence-percentage').textContent = `${diagnostics.decisionConfidence}%`;
            }
            
            if (diagnostics.learningRate !== undefined) {
                document.getElementById('learning-rate').style.width = `${diagnostics.learningRate}%`;
                document.getElementById('learning-percentage').textContent = `${diagnostics.learningRate}%`;
            }
            
            if (diagnostics.responseSpeed !== undefined) {
                document.getElementById('response-speed').style.width = `${diagnostics.responseSpeed}%`;
                document.getElementById('speed-percentage').textContent = `${diagnostics.responseSpeed}%`;
            }
        }

        // AI Chat functionality
        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            input.value = '';
            
            // Show thinking indicator
            document.getElementById('thinking').style.display = 'flex';
            
            // Send via WebSocket for real-time response
            if (socket && socket.connected) {
                socket.emit('ai_query', { message });
            } else {
                // Fallback to HTTP API
                try {
                    const response = await fetch('/api/ai-chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message })
                    });
                    const data = await response.json();
                    addChatMessage(data.response, 'ai');
                } catch (error) {
                    addChatMessage('Sorry, I couldn\'t process your request right now.', 'ai');
                } finally {
                    document.getElementById('thinking').style.display = 'none';
                }
            }
        }

        function addChatMessage(message, sender) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            if (sender === 'ai') {
                messageDiv.innerHTML = `<strong>üß† System AI:</strong> ${message}`;
            } else {
                messageDiv.innerHTML = `<strong>You:</strong> ${message}`;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Control functions
        async function emergencyStop() {
            if (confirm('Are you sure you want to activate the emergency kill switch? This will stop all bot operations immediately.')) {
                try {
                    const response = await fetch('/api/emergency-stop', { method: 'POST' });
                    const data = await response.json();
                    if (data.success) {
                        addLogEntry('üõë EMERGENCY KILL SWITCH ACTIVATED', 'error');
                    }
                } catch (error) {
                    addLogEntry('Failed to activate emergency stop', 'error');
                }
            }
        }

        async function forcePost() {
            try {
                addLogEntry('üìù Force post triggered by user', 'info');
                const response = await fetch('/api/force-post', { method: 'POST' });
                const data = await response.json();
                if (data.success) {
                    addLogEntry('üìù Force post completed successfully', 'success');
                }
            } catch (error) {
                addLogEntry('Failed to force post', 'error');
            }
        }

        async function optimizeNow() {
            try {
                addLogEntry('üåô Manual optimization started', 'info');
                const response = await fetch('/api/optimize-now', { method: 'POST' });
                const data = await response.json();
                if (data.success) {
                    addLogEntry('üåô Manual optimization completed', 'success');
                }
            } catch (error) {
                addLogEntry('Failed to run optimization', 'error');
            }
        }

        async function resetQuota() {
            if (confirm('Reset daily API quota counters?')) {
                try {
                    const response = await fetch('/api/reset-quota', { method: 'POST' });
                    const data = await response.json();
                    if (data.success) {
                        addLogEntry('üìä Daily quota counters reset', 'success');
                    }
                } catch (error) {
                    addLogEntry('Failed to reset quota', 'error');
                }
            }
        }

        // Tweet Preview Functions
        async function generatePreview() {
            try {
                document.getElementById('tweet-preview').innerHTML = '<div class="loading-placeholder">‚è≥ Generating preview...</div>';
                addLogEntry('üß™ Generating tweet preview...', 'info');
                
                const response = await fetch('/api/tweet-preview');
                const data = await response.json();
                
                if (data.previewContent && data.previewContent.content) {
                    // Update preview content
                    document.getElementById('tweet-preview').innerHTML = `
                        <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto; line-height: 1.5;">
                            ${data.previewContent.content}
                        </div>
                    `;
                    
                    // Update quality metrics
                    updatePreviewMetrics(data);
                    
                    addLogEntry(`‚úÖ Preview generated (Quality: ${data.qualityScore}/100)`, 'success');
                } else {
                    throw new Error('No content generated');
                }
            } catch (error) {
                document.getElementById('tweet-preview').innerHTML = '<div class="loading-placeholder">‚ùå Error generating preview</div>';
                addLogEntry('‚ùå Failed to generate preview: ' + error.message, 'error');
            }
        }

        async function testGeneration() {
            try {
                document.getElementById('tweet-preview').innerHTML = '<div class="loading-placeholder">üß™ Testing generation system...</div>';
                addLogEntry('üß™ Running generation test...', 'info');
                
                const response = await fetch('/api/test-tweet-generation', { method: 'POST' });
                const data = await response.json();
                
                if (data.success && data.result) {
                    // Update preview with test result
                    document.getElementById('tweet-preview').innerHTML = `
                        <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto; line-height: 1.5;">
                            ${data.result.content || 'Test content generated'}
                        </div>
                    `;
                    
                    // Update quality metrics
                    updatePreviewMetrics(data.result);
                    
                    addLogEntry(`‚úÖ Generation test complete (Quality: ${data.result.quality_score || 0}/100)`, 'success');
                } else {
                    throw new Error(data.error || 'Generation test failed');
                }
            } catch (error) {
                document.getElementById('tweet-preview').innerHTML = '<div class="loading-placeholder">‚ùå Generation test failed</div>';
                addLogEntry('‚ùå Generation test failed: ' + error.message, 'error');
            }
        }

        function updatePreviewMetrics(data) {
            // Update quality score
            const qualityScore = data.qualityScore || data.quality_score || 0;
            document.getElementById('preview-quality-score').textContent = `${qualityScore}/100`;
            document.getElementById('preview-quality-bar').style.width = `${qualityScore}%`;
            
            // Update mission alignment
            const alignment = data.mission_alignment || data.missionAlignment || 'Checking...';
            const alignmentEl = document.getElementById('preview-mission');
            alignmentEl.textContent = alignment;
            
            if (alignment === 'approved' || alignment === 'APPROVED') {
                alignmentEl.className = 'status-approved';
            } else if (alignment === 'rejected' || alignment === 'REJECTED') {
                alignmentEl.className = 'status-rejected';
            } else {
                alignmentEl.className = 'status-unknown';
            }
            
            // Update URL integrity
            const urlIntegrity = data.url_integrity || data.urlIntegrity || 'Preserved';
            document.getElementById('preview-url').textContent = urlIntegrity;
            
            // Update image selection
            const imageSelected = data.image_selected || data.imageSelection || 'None';
            document.getElementById('preview-image').textContent = imageSelected;
            
            // Update content type
            const contentType = data.content_type || data.contentType || 'Unknown';
            document.getElementById('preview-type').textContent = contentType;
            
            // Update character count
            const charCount = data.character_count || (data.content ? data.content.length : 0);
            document.getElementById('preview-chars').textContent = `${charCount}/280`;
            
            // Update ready to post button
            const readyBtn = document.getElementById('ready-to-post-btn');
            if (qualityScore >= 60 && (alignment === 'approved' || alignment === 'APPROVED')) {
                readyBtn.disabled = false;
                readyBtn.textContent = 'üöÄ Ready to Post';
                readyBtn.style.background = 'linear-gradient(135deg, #4CAF50 0%, #45a049 100%)';
            } else {
                readyBtn.disabled = true;
                readyBtn.textContent = '‚ö†Ô∏è Not Ready';
                readyBtn.style.background = '#555';
            }
        }

        // Utility functions
        function addLogEntry(message, type = 'info') {
            const logContainer = document.getElementById('activity-log');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            
            const timestamp = new Date().toLocaleTimeString();
            logEntry.innerHTML = `<strong>${timestamp}:</strong> ${message}`;
            
            logContainer.insertBefore(logEntry, logContainer.firstChild);
            
            // Keep only last 50 entries
            while (logContainer.children.length > 50) {
                logContainer.removeChild(logContainer.lastChild);
            }
        }

        function updateSystemStatus() {
            // Update decision intelligence
            const strategies = [
                'Optimal engagement window targeting',
                'Quality-first content generation',
                'Conservative API usage management',
                'Trend-aware content selection',
                'Real-time performance optimization'
            ];
            
            const actions = [
                'Analyzing engagement patterns',
                'Generating quality content',
                'Monitoring API quotas',
                'Optimizing posting schedule',
                'Learning from user interactions'
            ];
            
            document.getElementById('current-strategy').textContent = 
                strategies[Math.floor(Math.random() * strategies.length)];
            document.getElementById('next-action').textContent = 
                actions[Math.floor(Math.random() * actions.length)];
            document.getElementById('confidence-level').textContent = 
                `${Math.floor(Math.random() * 30) + 70}%`;
                
            // Update content pipeline
            document.getElementById('queue-status').textContent = 
                `${Math.floor(Math.random() * 5)} items ready`;
            document.getElementById('success-rate').textContent = 
                `${Math.floor(Math.random() * 20) + 80}%`;
        }

        // Event listeners
        document.getElementById('chat-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html> 