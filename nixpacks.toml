# ðŸš€ OPTIMIZED RAILWAY BUILD CONFIGURATION
# Prevents build timeouts and speeds up deployment

[build]
  # Optimize Node.js build
  cmd = "npm ci --omit=dev --cache .npm && npm run build"

[start]
  cmd = "npm start"

[variables]
  # Optimize Node.js for Railway
  NODE_ENV = "production"
  NPM_CONFIG_CACHE = ".npm"
  # Increase build timeout
  NPM_CONFIG_TIMEOUT = "300000"
  # Reduce memory usage during build
  NODE_OPTIONS = "--max-old-space-size=1024"

[phases.build]
  # Use faster npm ci instead of npm install
  cmds = [
    "npm ci --omit=dev --cache .npm",
    "npm run build"
  ]

[phases.start]
  cmd = "npm start"